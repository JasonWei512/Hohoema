<Page
    x:Class="NicoPlayerHohoema.Views.VideoInfomationPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:NicoPlayerHohoema.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:toolkit="using:WinRTXamlToolkit.Controls"
    xmlns:mvvm="using:Prism.Windows.Mvvm"
    xmlns:videoInfo="using:NicoPlayerHohoema.Views.VideoInfoContent"
    mvvm:ViewModelLocator.AutoWireViewModel="True"
    mc:Ignorable="d"
    d:DesignWidth="1200"
    d:DesignHeight="720"
    >


    <Page.Resources>
        <DataTemplate x:Key="SummaryVideoInfoContentTemplate" >
            <videoInfo:SummaryVideoInfoContent />
        </DataTemplate>
        <DataTemplate x:Key="RelationVideoInfoContentTemplate" >
            <videoInfo:RelationVideoInfoContent />
        </DataTemplate>
        <DataTemplate x:Key="IchibaVideoInfoContentTemplate" >
            <videoInfo:IchibaVideoInfoContent />
        </DataTemplate>


        <local:VideoInfoContentTemplateSelector x:Key="VideoInfoContentTemplateSelector"
                                                Summary="{StaticResource SummaryVideoInfoContentTemplate}"
                                                Relation="{StaticResource RelationVideoInfoContentTemplate}"
                                                Ichiba="{StaticResource IchibaVideoInfoContentTemplate}"
                                                >
            
        </local:VideoInfoContentTemplateSelector>
    </Page.Resources>

    <toolkit:DockPanel Margin="16">
        <RelativePanel Margin="16 0 0 0"
                       toolkit:DockPanel.Dock="Top"
                       >

            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup>

                    <!-- Landscape -->
                    <VisualState>
                        <VisualState.StateTriggers>
                            <AdaptiveTrigger MinWindowWidth="720" />
                        </VisualState.StateTriggers>

                        <VisualState.Setters>
                            <Setter Target="UserInfo.(RelativePanel.AlignLeftWith)" Value="TitleText" />
                            <Setter Target="MainContent.(RelativePanel.AlignLeftWith)" Value="TitleText" />
                        </VisualState.Setters>
                    </VisualState>


                    <!-- Portrait -->
                    <VisualState>
                        <VisualState.StateTriggers>
                            <AdaptiveTrigger MinWindowWidth="0" />
                        </VisualState.StateTriggers>

                        <VisualState.Setters>
                            <Setter Target="UserInfo.(RelativePanel.AlignLeftWith)" Value="BackButton" />

                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>


            <AppBarButton x:Name="BackButton"
                      Command="{Binding NavigationBackCommand}"
                      RelativePanel.AlignLeftWithPanel="True"
                      Margin="16 0"
                      
            Icon="Back"/>

            <TextBlock x:Name="TitleText"
            Text="{Binding Title}"
                   FontSize="28"
                   RelativePanel.RightOf="BackButton"
                   Width="600"
                   
                   Margin="0 0 0 32"
                   />


            <StackPanel 
            x:Name="UserInfo"
            Background="WhiteSmoke"
            Orientation="Horizontal"
            Padding="8"
            Margin="0"
            RelativePanel.Below="TitleText"
            >
                <Image Source="{Binding UserIconUrl}" 
                                Margin="0 0 8 0"
                                Width="48"
                                Height="48"
                                />
                <TextBlock Text="{Binding UserName}"
                                    VerticalAlignment="Center"
                                    />
            </StackPanel>


            <StackPanel x:Name="CountInfo"
                    Orientation="Horizontal" 
                    Margin="16 0 0 0"
                    RelativePanel.AlignBottomWith="UserInfo"
                    RelativePanel.RightOf="UserInfo"
                                    >
                <TextBlock Margin="8 0">
                                <Run Text="再生"/>
                                <Run Text="{Binding PlayCount}" />
                </TextBlock>
                <TextBlock Margin="8 0">
                                <Run Text="コメ"/>
                                <Run Text="{Binding CommentCount}" />
                </TextBlock>
                <TextBlock Margin="8 0">
                                <Run Text="マイ"/>
                                <Run Text="{Binding MylistCount}" />
                </TextBlock>
            </StackPanel>

            <toolkit:DockPanel x:Name="ActionButtons" 
                           RelativePanel.RightOf="TitleText"
                           Margin="64 32"
                           >
                <Button Content="Play" Command="{Binding PlayVideoCommand}"
                    
                    Width="120"
                    Height="80"
                    ></Button>
            </toolkit:DockPanel>



        </RelativePanel>




        <ScrollViewer
            VerticalScrollMode="Disabled"
            
            >

            <ItemsControl ItemsSource="{Binding VideoInfoContentItems}"
                          ItemTemplateSelector="{StaticResource VideoInfoContentTemplateSelector}"
                          >
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

            </ItemsControl>

        </ScrollViewer>
        
    </toolkit:DockPanel>
    


</Page>
